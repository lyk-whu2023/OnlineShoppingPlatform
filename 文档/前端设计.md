# 前端设计（Vue3）

- 技术栈：Vue 3、Vite、Vue Router、Element Plus、Axios、ECharts
- 目标：将 `demo` 静态原型迁移为可维护的 Vue3 单页应用，并与后端 REST 接口对接
- 参考原型：`demo/assets/js/router.js:1` 的路由映射；数据模型参考 `src/main/java/org/example/onlineshoppingplatform/dto/*.java`

## 目录结构

- `frontend/`
  - `index.html`
  - `vite.config.js`
  - `package.json`
  - `src/`
    - `main.js`（应用入口，注册 Element Plus、Router）
    - `App.vue`（顶层布局与导航）
    - `router/index.js`（用户端与管理端路由）
    - `api/`（Axios 客户端与模块化接口）
      - `http.js`（Axios 实例，统一拦截器）
      - `products.js`、`categories.js`、`orders.js`、`users.js`、`addresses.js`、`cart.js`、`auth.js`、`payments.js`、`shipments.js`
    - `views/`（页面视图，按照 demo 原型命名）
      - `HomeView.vue`、`ProductListView.vue`、`ProductDetailView.vue`
      - `CartView.vue`、`OrderSubmitView.vue`、`OrderListView.vue`、`OrderDetailView.vue`
      - `AuthView.vue`、`UserCenterView.vue`、`AddressView.vue`
      - `admin/AdminLayout.vue`、`admin/AdminLogin.vue`
      - `admin/AdminDashboard.vue`、`admin/AdminProducts.vue`、`admin/AdminCategories.vue`、`admin/AdminUsers.vue`、`admin/AdminOrders.vue`、`admin/AdminStats.vue`

## 路由设计

- 用户端
  - `/` → `HomeView`
  - `/products` → `ProductListView`
  - `/product/:id` → `ProductDetailView`
  - `/login`、`/register` → `AuthView`
  - `/cart` → `CartView`
  - `/order/submit` → `OrderSubmitView`
  - `/user` → `UserCenterView`
  - `/user/address` → `AddressView`
  - `/user/orders` → `OrderListView`
  - `/order/:id` → `OrderDetailView`
- 管理端（嵌套路由）
  - `/admin/login` → `AdminLogin`
  - `/admin` → `AdminLayout`
    - `''` → `AdminDashboard`
    - `'products'` → `AdminProducts`
    - `'categories'` → `AdminCategories`
    - `'users'` → `AdminUsers`
    - `'orders'` → `AdminOrders`
    - `'stats'` → `AdminStats`
- 映射依据：`demo/assets/js/router.js:1`

## 状态管理与数据流

- 轻量场景先使用组件 `data` 与路由参数驱动；后续可引入 Pinia 以集中管理用户信息、购物车等跨页面状态
- 与后端交互通过 `api/*` 模块函数，组件在 `onMounted` 中发起请求并渲染

## UI 规范

- 组件库采用 Element Plus（Vue3 版本），对应 demo 中 Element UI 组件
- 图表使用 ECharts，在仪表盘与统计页面集成

## 接口与 DTO 映射

- 商品：`ProductDTO` 字段参考 `src/main/java/org/example/onlineshoppingplatform/dto/ProductDTO.java:7`
- 分类：`CategoryDTO` 字段参考 `src/main/java/org/example/onlineshoppingplatform/dto/CategoryDTO.java:4`
- 用户：`UserDTO` 字段参考 `src/main/java/org/example/onlineshoppingplatform/dto/UserDTO.java:6`
- 订单：`OrderDTO`、`OrderItemDTO` 字段参考 `src/main/java/org/example/onlineshoppingplatform/dto/OrderDTO.java:8`、`src/main/java/org/example/onlineshoppingplatform/dto/OrderItemDTO.java:6`
- 地址：`AddressDTO` 字段参考 `src/main/java/org/example/onlineshoppingplatform/dto/AddressDTO.java:6`
- 查询：`ProductQueryDTO` 字段参考 `src/main/java/org/example/onlineshoppingplatform/dto/ProductQueryDTO.java:6`

## 页面到接口的对应关系

- `HomeView`：热销商品与推荐分类 → `GET /api/products?sort=sales`、`GET /api/categories`
- `ProductListView`：分页与筛选 → `GET /api/products`（查询参数为 `ProductQueryDTO`）
- `ProductDetailView`：商品详情与图集 → `GET /api/products/{id}`、`GET /api/product-images/{id}`
- `CartView`：购物车增删改查 → 参照 `Cart` 与 `CartItem` 相关接口
- `OrderSubmitView`：提交订单 → `POST /api/orders`
- `OrderListView` / `OrderDetailView`：订单列表与详情 → `GET /api/orders?userId=`、`GET /api/orders/{id}`
- `AuthView` / `UserCenterView`：登录注册、个人信息 → `POST /api/auth/login`、`POST /api/auth/register`、`GET /api/users/me`
- `AddressView`：地址管理 → `GET/POST/PUT/DELETE /api/addresses`
- 管理端各页面对应 `products/categories/users/orders/stats` 的增删改查接口

## 前端数据模型示例

- `Product`：`{ id, name, categoryId, categoryName, price, stock, sales, description, images }`
- `Order`：`{ id, userId, amount, status, createdAt, consigneeName, consigneePhone, consigneeDetail, items[] }`
- `Address`：`{ id, userId, name, phone, detail, isDefault, createdAt }`

## 开发约定

- 统一错误处理：Axios 拦截器捕获非 2xx 响应并在页面弹出错误提示
- 时间与金额字段统一格式化显示（本地时区与人民币符号）
- 表单校验采用 Element Plus 的表单校验规则

## 渲染与性能

- 列表分页服务端分页，避免一次性渲染过多数据
- 路由懒加载（使用动态 `import()`）以降低首屏体积

## 起步与运行

- 在 `frontend` 目录执行：`npm install` → `npm run dev`
- 默认后端地址：`http://localhost:8080/api`，可在 `api/http.js` 中配置
