# 后端接口文档

## 1. 认证模块 (AuthController)
- **POST /api/auth/login**
    - 功能：用户登录
    - 参数：`{ username, password }`
    - 返回：`{ token, user: UserDTO }`
- **POST /api/auth/register**
    - 功能：用户注册
    - 参数：`{ username, password, phone }`
    - 返回：`{ token, user: UserDTO }`
- **POST /api/auth/logout**
    - 功能：退出登录
    - 参数：无
    - 返回：无

## 2. 商品模块 (ProductController)
- **GET /api/products**
    - 功能：获取商品列表（支持分页与筛选）
    - 参数：`ProductQueryDTO` (page, size, categoryId, keyword, sort)
    - 返回：`{ list: [ProductDTO], total, page, size }`
- **GET /api/products/{id}**
    - 功能：获取商品详情
    - 参数：`id` (路径参数)
    - 返回：`ProductDTO`
- **POST /api/products** (Admin)
    - 功能：创建商品
    - 参数：`ProductDTO`
    - 返回：`ProductDTO`
- **PUT /api/products/{id}** (Admin)
    - 功能：更新商品
    - 参数：`id`, `ProductDTO`
    - 返回：`ProductDTO`
- **DELETE /api/products/{id}** (Admin)
    - 功能：删除商品
    - 参数：`id`
    - 返回：无
- **GET /api/product-images/{productId}**
    - 功能：获取商品图片列表
    - 参数：`productId`
    - 返回：`List<String>` (URLs)

## 3. 分类模块 (CategoryController)
- **GET /api/categories**
    - 功能：获取全部分类
    - 参数：无
    - 返回：`List<CategoryDTO>`
- **GET /api/categories/admin** (Admin)
    - 功能：后台获取分类列表（支持分页与搜索）
    - 参数：`keyword`, `page`, `size`
    - 返回：`{ list, total, page, size }`

## 4. 购物车模块 (CartController)
- **GET /api/cart**
    - 功能：获取当前用户购物车
    - 参数：无 (依赖 Token)
    - 返回：`List<CartItemDTO>`
- **POST /api/cart/items**
    - 功能：添加商品到购物车
    - 参数：`CartItemDTO` (productId, qty)
    - 返回：`List<CartItemDTO>` (更新后的购物车)
- **PUT /api/cart/items/{productId}**
    - 功能：更新购物车商品数量
    - 参数：`{ qty }`
    - 返回：`List<CartItemDTO>`
- **DELETE /api/cart/items/{productId}**
    - 功能：移除购物车商品
    - 参数：`productId`
    - 返回：`List<CartItemDTO>`
- **DELETE /api/cart**
    - 功能：清空购物车
    - 参数：无
    - 返回：无

## 5. 订单模块 (OrderController)
- **POST /api/orders**
    - 功能：提交订单
    - 参数：`{ addressId }`
    - 返回：`OrderDTO`
- **GET /api/orders**
    - 功能：获取我的订单列表
    - 参数：无
    - 返回：`List<OrderDTO>`
- **GET /api/orders/{id}**
    - 功能：获取订单详情
    - 参数：`id`
    - 返回：`OrderDTO`
- **GET /api/orders/admin** (Admin)
    - 功能：后台获取所有订单
    - 参数：`status`, `keyword`, `page`, `size`
    - 返回：`{ list, total, page, size }`
- **PATCH /api/orders/{id}/status** (Admin)
    - 功能：更新订单状态
    - 参数：`{ status }`
    - 返回：无

## 6. 用户模块 (UserController)
- **GET /api/users/me**
    - 功能：获取当前用户信息
    - 参数：无
    - 返回：`UserDTO`
- **GET /api/users/admin** (Admin)
    - 功能：后台获取用户列表
    - 参数：`keyword`, `page`, `size`
    - 返回：`{ list, total, page, size }`

## 7. 地址模块 (AddressController)
- **GET /api/addresses**
    - 功能：获取我的地址列表
    - 参数：无
    - 返回：`List<AddressDTO>`
- **POST /api/addresses**
    - 功能：新增地址
    - 参数：`AddressDTO`
    - 返回：`AddressDTO`
- **PUT /api/addresses/{id}**
    - 功能：修改地址
    - 参数：`id`, `AddressDTO`
    - 返回：`AddressDTO`
- **DELETE /api/addresses/{id}**
    - 功能：删除地址
    - 参数：`id`
    - 返回：无

## 8. 收藏模块 (FavoriteController)
- **GET /api/favorites**
    - 功能：获取收藏列表
    - 参数：无
    - 返回：`List<ProductDTO>`
- **POST /api/favorites**
    - 功能：添加收藏
    - 参数：`{ productId }`
    - 返回：`{ list }`
- **DELETE /api/favorites/{productId}**
    - 功能：取消收藏
    - 参数：`productId`
    - 返回：无
- **GET /api/favorites/check**
    - 功能：检查是否已收藏
    - 参数：`productId`
    - 返回：`{ favorite: boolean }`

## 9. 统计模块 (StatsController)
- **GET /api/stats** (Admin)
    - 功能：获取后台仪表盘统计数据
    - 参数：无
    - 返回：`{ productCount, userCount, orderCount, totalSales, topProducts }`
