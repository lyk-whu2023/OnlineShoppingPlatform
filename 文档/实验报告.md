# 实验报告

**姓名**：[你的姓名]  
**学号**：[你的学号]  
**年级**：2023级  
**专业**：软件工程  
**指导教师**：[教师姓名]  
**实验日期**：2025年12月17日  

---

**实验类型**：
- [x] 独立实验课
- [ ] 含实验的理论课
- [ ] 计划外自选开放实验
- [ ] 学生自主式开放实验
- [ ] 大学生科技竞赛

**实验名称**：B/S架构企业级应用开发——在线购物平台 (OnlineShoppingPlatform)

## 一、预习部分

### 1. 实验原理
本实验基于 **B/S (Browser/Server)** 架构，采用前后端分离的开发模式。
- **后端**：基于 **Spring Boot** 框架，遵循 **MVC (Model-View-Controller)** 设计模式。利用 **MyBatis** 作为 ORM 框架实现 Java 对象与关系型数据库 MySQL 的映射。通过 RESTful API 与前端进行数据交互。
- **前端**：基于 **Vue 3** 框架，采用 **MVVM (Model-View-ViewModel)** 模式。使用 **Vite** 进行构建，**Element Plus** 提供 UI 组件，**Axios** 处理 HTTP 请求，**Vue Router** 管理单页应用路由。

### 2. 主要仪器设备
- **硬件**：个人计算机 (Windows 11, 16GB RAM)
- **开发工具**：
    - 后端：IntelliJ IDEA / Maven
    - 前端：VS Code / Node.js (npm)
    - 数据库：MySQL 8.0 / Navicat (或 DBeaver)
- **运行环境**：JDK 17, Node.js v18+

### 3. 实验目的
1.  深入理解开源软件生态，掌握 JavaEE 主流技术栈 (Spring Boot, MyBatis) 的应用。
2.  熟练使用 Vue 3 全家桶构建现代化的单页 Web 应用。
3.  掌握前后端分离架构下的接口设计、认证鉴权 (JWT) 及数据交互。
4.  通过实战开发一个完整的在线购物平台，提升分析问题与解决实际问题的能力。

### 4. 实验内容
设计并实现一个功能完善的在线购物平台，包含以下核心模块：
-   **用户模块**：注册、登录、个人信息管理、收货地址管理。
-   **商品模块**：商品浏览、搜索、分类筛选、商品详情展示。
-   **交易模块**：购物车管理、订单提交、订单状态流转（待支付、待发货、已完成）。
-   **管理模块**：后台仪表盘统计、商品/分类/用户/订单的增删改查管理。

### 5. 实验要求
-   功能完整，业务逻辑闭环。
-   代码规范，注释清晰，结构合理。
-   界面美观，交互流畅，具备良好的用户体验。
-   提交完整的源代码、数据库脚本及实验报告。

---

## 二、实验操作部分

### 1. 实验数据与数据库设计
系统使用 MySQL 数据库，核心表结构如下：
-   `users`: 存储用户账户信息 (id, username, password, role, phone, ...)。
-   `products`: 存储商品信息 (id, name, price, stock, category_id, image, ...)。
-   `categories`: 商品分类 (id, name)。
-   `orders`: 订单主表 (id, user_id, total_amount, status, address_info, ...)。
-   `order_items`: 订单明细 (id, order_id, product_id, price, quantity)。
-   `cart_items`: 购物车条目 (user_id, product_id, quantity)。
-   `addresses`: 收货地址 (user_id, name, phone, detail, ...)。
-   `favorites`: 用户收藏 (user_id, product_id)。

### 2. 实验操作过程

#### 2.1 后端实现 (Spring Boot)
1.  **项目初始化**：使用 Spring Initializr 创建项目，引入 Web, MyBatis, MySQL Driver, Lombok 等依赖。
2.  **配置数据源**：在 `application.properties` 中配置 MySQL 连接信息及 MyBatis 驼峰命名规则。
3.  **Entity与Mapper开发**：定义实体类，并使用 MyBatis 注解 (`@Select`, `@Insert` 等) 编写 Mapper 接口，实现数据的 CRUD 操作。
4.  **Service业务逻辑**：
    -   `OrderService`: 实现下单逻辑，开启 `@Transactional` 事务，确保扣减库存与生成订单的原子性。
    -   `UserService`: 实现登录逻辑，校验密码，生成 JWT Token。
5.  **Controller接口开发**：遵循 RESTful 规范，编写 `ProductController`, `OrderController` 等，统一返回 JSON 数据。
6.  **安全认证**：实现 `JwtUtil` 工具类与 `JwtAuthInterceptor` 拦截器，对非公开接口进行 Token 校验，并将解析出的用户信息注入 Request 属性中。

#### 2.2 前端实现 (Vue 3)
1.  **项目搭建**：使用 `npm create vite@latest` 初始化 Vue 3 项目，安装 `element-plus`, `axios`, `vue-router`, `echarts`。
2.  **API 封装**：在 `src/api` 目录下封装 `http.js` (Axios 拦截器) 及各模块接口函数，统一处理 Token 注入与错误响应。
3.  **路由配置**：在 `router/index.js` 中定义路由表，配置全局前置守卫，实现登录拦截与管理员权限校验。
4.  **页面开发**：
    -   **前台**：使用 Flex/Grid 布局实现响应式首页、商品列表页；复用组件实现购物车与订单中心。
    -   **后台**：封装 `AdminLayout` 布局，集成 ECharts 实现数据可视化仪表盘，使用 Element Plus 表格组件实现数据的管理。

#### 2.3 关键功能测试
1.  **用户流程**：注册新用户 -> 登录 -> 浏览商品 -> 加入购物车 -> 结算下单 -> 查看订单状态。
2.  **管理员流程**：登录后台 -> 查看销售统计 -> 上架新商品 -> 修改订单状态 -> 用户端同步更新。

### 3. 结论
经过开发与测试，本系统已成功实现需求分析中的所有核心功能。前后端交互顺畅，数据存取正确，界面交互友好。系统具备一定的健壮性，能够处理常见的用户错误操作与未授权访问。

---

## 三、实验效果分析

### 1. 实验完成情况
-   **基础功能**：用户注册登录、商品展示、购物车、下单流程均已完成且运行稳定。
-   **高级功能**：实现了基于 JWT 的无状态认证；后台管理系统功能完备，支持数据可视化展示；实现了基于角色的权限控制 (RBAC)。
-   **界面效果**：前端采用了 Element Plus 组件库，整体风格简洁统一，响应式布局适配良好。

### 2. 遇到的问题与解决方案
1.  **问题**：跨域请求被浏览器拦截。
    -   **解决**：在后端 `WebConfig` 中配置 `CorsRegistry`，允许前端域名的跨域访问；开发环境中在 Vite 配置 `proxy` 代理。
2.  **问题**：页面刷新后 Vue Store 状态丢失。
    -   **解决**：使用 `localStorage` 持久化存储 Token 和用户信息，在应用初始化时读取并恢复状态。
3.  **问题**：并发下单可能导致超卖。
    -   **解决**：在数据库层面使用乐观锁或在 SQL 语句中加入 `stock > 0` 的条件判断，确保库存扣减的安全性（本项目采用了 SQL 条件判断）。
4.  **问题**：图片上传与存储。
    -   **解决**：考虑到实验环境简化，目前采用存储图片 URL 的方式，实际部署可对接对象存储服务 (OSS)。

### 3. 收获与总结
通过本次实验，我深刻体会到了前后端分离架构的优势，即前后端解耦、开发并行、维护方便。同时，我也认识到规范的代码结构和详细的接口文档对于团队协作的重要性。在技术层面，我对 Spring Boot 的自动配置原理、MyBatis 的动态 SQL 以及 Vue 3 的组合式 API 有了更深层次的理解。未来，我计划引入 Redis 缓存以提升系统性能，并对接真实支付接口，使项目更接近商业化标准。
