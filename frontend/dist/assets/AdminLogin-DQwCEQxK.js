import{_ as w,r as i,c as V,a as l,w as a,d as t,j as b,f as x,b as y,h as E,E as m}from"./index-DGdkDIp8.js";import{l as k}from"./auth-vkCmgdyK.js";import"./http-CBG7w8uf.js";const A={class:"container small"},B={__name:"AdminLogin",setup(C){const p=b(),n=i("admin"),s=i(""),r=i(!1);async function c(){r.value=!0;try{if(!n.value||!s.value)throw new Error("请输入用户名和密码");const o=await k({username:n.value,password:s.value});o&&o.user?(o.user.role||"")==="admin"?p.push("/admin"):(m.error("非管理员账户，无法进入管理后台"),p.push("/")):m.error("登录失败：账号或密码错误")}catch(o){m.error(String(o.message||"请求失败"))}finally{r.value=!1}}return(o,e)=>{const _=t("el-input"),u=t("el-form-item"),f=t("el-button"),v=t("el-form"),g=t("el-card");return x(),V("div",A,[l(g,null,{default:a(()=>[e[3]||(e[3]=y("div",{class:"title"},"Admin",-1)),l(v,{"label-width":"100px"},{default:a(()=>[l(u,{label:"用户名"},{default:a(()=>[l(_,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=d=>n.value=d)},null,8,["modelValue"])]),_:1}),l(u,{label:"密码"},{default:a(()=>[l(_,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=d=>s.value=d),type:"password"},null,8,["modelValue"])]),_:1}),l(u,null,{default:a(()=>[l(f,{type:"primary",onClick:c,loading:r.value,disabled:r.value},{default:a(()=>[...e[2]||(e[2]=[E("登录",-1)])]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})])}}},h=w(B,[["__scopeId","data-v-886654d1"]]);export{h as default};
