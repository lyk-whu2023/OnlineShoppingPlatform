import{_ as w,r as d,o as x,u as C,c as p,b as a,a as l,w as n,d as c,t as i,f as _,F as B,e as D,g as E,h as v,E as f}from"./index-DGdkDIp8.js";import{a as I}from"./products-DzG9zYyj.js";import{a as N}from"./cart-CfUpXyOk.js";import"./http-CBG7w8uf.js";const P={class:"container"},F={class:"detail"},M={class:"left"},S=["src"],$={class:"right"},q={class:"title"},L={class:"price"},R={class:"stock"},T={class:"desc"},U={class:"actions"},j={__name:"ProductDetailView",setup(z){const g=C(),t=d(null),u=d([]),r=d(1);x(async()=>{const s=g.params.id;try{const e=await I(s);t.value=e,u.value=e&&e.images&&e.images.length?e.images:["p"+s]}catch{t.value=null,u.value=["p"+s]}});function h(s){return"https://picsum.photos/seed/"+s+"/720/360"}async function y(){if(!(!t.value||!t.value.id))try{await N({productId:t.value.id,qty:r.value}),f.success("已加入购物车")}catch(s){f.error(String(s.message||"加入购物车失败"))}}return(s,e)=>{const k=c("el-carousel-item"),V=c("el-carousel"),b=c("el-input-number"),m=c("el-button");return _(),p("div",P,[a("div",F,[a("div",M,[l(V,{height:"360px"},{default:n(()=>[(_(!0),p(B,null,D(u.value,o=>(_(),E(k,{key:o},{default:n(()=>[a("img",{src:h(o),class:"bigpic"},null,8,S)]),_:2},1024))),128))]),_:1})]),a("div",$,[a("div",q,i(t.value&&t.value.name),1),a("div",L,"¥"+i(t.value&&t.value.price),1),a("div",R,"库存 "+i(t.value&&t.value.stock),1),a("div",T,i(t.value&&t.value.description),1),l(b,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value=o),min:1,max:5},null,8,["modelValue"]),a("div",U,[l(m,{type:"primary",onClick:y},{default:n(()=>[...e[2]||(e[2]=[v("加入购物车",-1)])]),_:1}),l(m,{type:"success",onClick:e[1]||(e[1]=o=>s.$router.push("/order/submit"))},{default:n(()=>[...e[3]||(e[3]=[v("立即购买",-1)])]),_:1})])])])])}}},K=w(j,[["__scopeId","data-v-c4889f5e"]]);export{K as default};
