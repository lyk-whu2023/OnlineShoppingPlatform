import{g as I}from"./products-DzG9zYyj.js";import{g as L}from"./categories-YZVxBU0r.js";import{_ as N,i as P,r as m,o as U,c as g,a as s,b as l,w as n,d as r,F as V,e as h,f as i,g as w,h as k,t as b}from"./index-DGdkDIp8.js";import"./http-CBG7w8uf.js";const D={class:"container"},F={class:"filters"},$={class:"grid"},q=["src"],A={class:"card-footer"},E={class:"price"},M={class:"pagination"},S={__name:"ProductListView",setup(T){const o=P({categoryId:void 0,keyword:"",sort:"sales",page:1,size:8}),c=m([]),u=m(0),p=m([]);U(async()=>{try{p.value=await L()}catch{p.value=[]}_()});async function _(){try{const a={...o};a.sort==="sales"&&delete a.sort;const t=await I(a);c.value=t.list||[],u.value=t.total||0}catch{c.value=[],u.value=0}}function x(a){o.page=a,_()}function C(a){return"https://picsum.photos/seed/"+(a.images&&a.images[0]||"p"+a.id)+"/640/360"}return(a,t)=>{const d=r("el-option"),v=r("el-select"),z=r("el-input"),f=r("el-button"),y=r("el-card"),B=r("el-pagination");return i(),g("div",D,[s(y,null,{default:n(()=>[l("div",F,[s(v,{modelValue:o.categoryId,"onUpdate:modelValue":t[0]||(t[0]=e=>o.categoryId=e),placeholder:"分类",style:{width:"160px"}},{default:n(()=>[(i(!0),g(V,null,h(p.value,e=>(i(),w(d,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(z,{modelValue:o.keyword,"onUpdate:modelValue":t[1]||(t[1]=e=>o.keyword=e),placeholder:"关键词",style:{width:"240px"}},null,8,["modelValue"]),s(v,{modelValue:o.sort,"onUpdate:modelValue":t[2]||(t[2]=e=>o.sort=e),placeholder:"排序",style:{width:"160px"}},{default:n(()=>[s(d,{label:"价格升序",value:"priceAsc"}),s(d,{label:"价格降序",value:"priceDesc"}),s(d,{label:"销量优先",value:"sales"})]),_:1},8,["modelValue"]),s(f,{type:"primary",onClick:_},{default:n(()=>[...t[3]||(t[3]=[k("搜索",-1)])]),_:1})])]),_:1}),l("div",$,[(i(!0),g(V,null,h(c.value,e=>(i(),w(y,{key:e.id,class:"card"},{default:n(()=>[l("img",{src:C(e),class:"pic"},null,8,q),l("div",A,[l("span",null,b(e.name),1),l("span",E,"¥"+b(e.price),1)]),s(f,{type:"primary",style:{width:"100%"},onClick:j=>a.$router.push("/product/"+e.id)},{default:n(()=>[...t[4]||(t[4]=[k("查看详情",-1)])]),_:1},8,["onClick"])]),_:2},1024))),128))]),l("div",M,[s(B,{layout:"prev, pager, next","current-page":o.page,"page-size":o.size,total:u.value,onCurrentChange:x},null,8,["current-page","page-size","total"])])])}}},O=N(S,[["__scopeId","data-v-22a87f98"]]);export{O as default};
