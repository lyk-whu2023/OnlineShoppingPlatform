import{g as A,d as B,u as N,c as $}from"./categories-YZVxBU0r.js";import{_ as z,r as f,o as I,c as U,b as _,a as t,w as l,d as n,f as D,h as u}from"./index-DGdkDIp8.js";import"./http-CBG7w8uf.js";const E={style:{"margin-bottom":"12px"}},M={class:"table-actions"},T={__name:"AdminCategories",setup(j){const r=f([]),i=f(!1),a=f({id:null,name:""});I(m);async function m(){try{r.value=await A()}catch{r.value=[]}}function v(){a.value={id:null,name:""},i.value=!0}function c(d){a.value={...d},i.value=!0}async function y(){try{a.value.id?await N(a.value.id,a.value):await $(a.value)}finally{i.value=!1,await m()}}async function b(d){try{await B(d)}finally{await m()}}return(d,e)=>{const s=n("el-button"),p=n("el-table-column"),w=n("el-table"),C=n("el-input"),g=n("el-form-item"),k=n("el-form"),V=n("el-dialog");return D(),U("div",null,[_("div",E,[t(s,{type:"primary",onClick:v},{default:l(()=>[...e[3]||(e[3]=[u("新增分类",-1)])]),_:1})]),t(w,{data:r.value,style:{width:"100%"}},{default:l(()=>[t(p,{label:"ID",width:"120",prop:"id"}),t(p,{label:"分类名",prop:"name"}),t(p,{label:"操作",width:"220"},{default:l(o=>[_("div",M,[t(s,{type:"primary",size:"small",onClick:x=>c(o.row)},{default:l(()=>[...e[4]||(e[4]=[u("编辑",-1)])]),_:1},8,["onClick"]),t(s,{type:"danger",size:"small",onClick:x=>b(o.row.id)},{default:l(()=>[...e[5]||(e[5]=[u("删除",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"]),t(V,{title:"新增/编辑分类",modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=o=>i.value=o),width:"420px"},{default:l(()=>[t(k,{"label-width":"100px"},{footer:l(()=>[t(s,{onClick:e[1]||(e[1]=o=>i.value=!1)},{default:l(()=>[...e[6]||(e[6]=[u("取消",-1)])]),_:1}),t(s,{type:"primary",onClick:y},{default:l(()=>[...e[7]||(e[7]=[u("保存",-1)])]),_:1})]),default:l(()=>[t(g,{label:"分类名"},{default:l(()=>[t(C,{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.name=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},H=z(T,[["__scopeId","data-v-ddb42259"]]);export{H as default};
